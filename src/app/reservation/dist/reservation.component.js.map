{"version":3,"sources":["reservation.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,sCAA0E;AAC1E,wCAIwB;AAMxB,4CAAqC;AAOrC;IAME,8BACU,aAA8B,EAC9B,EAAe,EACf,YAA4B,EAC5B,GAAe,EACf,cAA8B;QAJ9B,kBAAa,GAAb,aAAa,CAAiB;QAC9B,OAAE,GAAF,EAAE,CAAa;QACf,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,QAAG,GAAH,GAAG,CAAY;QACf,mBAAc,GAAd,cAAc,CAAgB;QARxC,SAAI,GAAG,oBAAoB,CAAC;QAU1B,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED,sBAAW,2CAAS;aAApB;YACE,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,CAAC;QACzC,CAAC;;;OAAA;IAED,mCAAmC;IACnC,uCAAQ,GAAR;QACE,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,wCAAS,GAAT;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACrD,CAAC;IAED,mCAAmC;IACnC,qCAAM,GAAN;QAAA,iBAWC;QAVC,IAAM,IAAI,gBAAQ,IAAI,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC;QACpC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACnB,IAAI,CAAC,GAAG;iBACL,QAAQ,CAAC,IAAI,CAAC;iBACd,IAAI,CACH,eAAG,CAAC,cAAM,OAAA,KAAI,CAAC,SAAS,EAAE,EAAhB,CAAgB,CAAC,EAC3B,eAAG,CAAC,cAAM,OAAA,KAAI,CAAC,aAAa,EAAE,EAApB,CAAoB,CAAC,CAChC;iBACA,SAAS,EAAE,CAAC;SAChB;IACH,CAAC;IAEO,4CAAa,GAArB;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YACxB,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC,kBAAU,CAAC,KAAK,EAAE,kBAAU,CAAC,QAAQ,CAAC,CAAC;YACtD,IAAI,EAAE,CAAC,IAAI,EAAE,kBAAU,CAAC,QAAQ,CAAC;YACjC,KAAK,EAAE,CAAC,KAAK,EAAE,kBAAU,CAAC,QAAQ,CAAC;YACnC,KAAK,EAAE,CAAC,IAAI,EAAE,kBAAU,CAAC,QAAQ,CAAC;YAClC,QAAQ,EAAE,CAAC,IAAI,CAAC;YAChB,YAAY,EAAE,CAAC,IAAI,EAAE,kBAAU,CAAC,QAAQ,CAAC;YACzC,cAAc,EAAE,CAAC,IAAI,EAAE,kBAAU,CAAC,QAAQ,CAAC;YAC3C,OAAO,EAAE,CAAC,IAAI,CAAC;YACf,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;gBACnB,IAAI,EAAE,CAAC,UAAU,EAAE,kBAAU,CAAC,QAAQ,CAAC;aACxC,CAAC;SACH,CAAC,CAAC;IACL,CAAC;IAxDmB;QAAnB,gBAAS,CAAC,OAAO,CAAC;+CAAyB;IADjC,oBAAoB;QALhC,gBAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;YAC3B,WAAW,EAAE,8BAA8B;YAC3C,SAAS,EAAE,CAAC,8BAA8B,CAAC;SAC5C,CAAC;OACW,oBAAoB,CA0DhC;IAAD,2BAAC;CA1DD,AA0DC,IAAA;AA1DY,oDAAoB","file":"reservation.component.js","sourcesContent":["import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport {\n  FormBuilder,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { ApiService } from '../services/api.service';\nimport { LoadingService } from '../services/loading.service';\nimport { BsLocaleService } from 'ngx-bootstrap/datepicker';\nimport { tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-reservation',\n  templateUrl: './reservation.component.html',\n  styleUrls: ['./reservation.component.scss'],\n})\nexport class ReservationComponent implements OnInit {\n  @ViewChild('modal') modal: TemplateRef<any>;\n  form: FormGroup;\n  mask = '00 (000) 000-00-00';\n  modalRef: BsModalRef;\n\n  constructor(\n    private localeService: BsLocaleService,\n    private fb: FormBuilder,\n    private modalService: BsModalService,\n    private api: ApiService,\n    private loadingService: LoadingService\n  ) {\n    this.localeService.use('ru');\n  }\n\n  public get isLoading(): Observable<boolean> {\n    return this.loadingService.isLoading();\n  }\n\n  // tslint:disable-next-line:typedef\n  ngOnInit() {\n    this._generateForm();\n  }\n\n  openModal() {\n    this.modalRef = this.modalService.show(this.modal);\n  }\n\n  // tslint:disable-next-line:typedef\n  submit(): void {\n    const data = { ...this.form.value };\n    if (this.form.valid) {\n      this.api\n        .sendmail(data)\n        .pipe(\n          tap(() => this.openModal()),\n          tap(() => this._generateForm())\n        )\n        .subscribe();\n    }\n  }\n\n  private _generateForm(): void {\n    this.form = this.fb.group({\n      email: [null, [Validators.email, Validators.required]],\n      name: [null, Validators.required],\n      phone: ['38(', Validators.required],\n      adult: [null, Validators.required],\n      children: [null],\n      arrival_date: [null, Validators.required],\n      date_departure: [null, Validators.required],\n      message: [null],\n      rooms: this.fb.group({\n        room: ['standard', Validators.required],\n      }),\n    });\n  }\n}\n"]}